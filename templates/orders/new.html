{% extends 'base.html' %}

{% block content %}
<h2>明細</h2>
{% for item in order_items %}
<div class="card mb-3 border-0 border-bottom">
    <div class="row g-0">
        <div class="col-sm-2 col-lg-1 d-flex justify-content-center align-items-center">
            <img src="{{ item.image_url }}" class="img-fluid rounded" alt="product image">
        </div>
        <div class="col-sm-10 col-lg-11">
            <div class="card-body container">
                <div class="row mt-2">
                    <div class="col-12">
                        <h5 class="card-title">{{ item.name }}</h5>
                    </div>
                    <div class="col-sm-4 py-2">
                        單價：{{ item.price }}
                    </div>
                    <div class="col-sm-4 py-2">
                        數量：{{ item.quantity }}
                    </div>
                    <div class="col-sm-4 py-2">
                        小計：{{ item.subtotal }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}
<h3 class="text-end">總計：$ {{ amount }}</h3>

<h2>收件資訊</h2>
<form class="row g-3 needs-validation" method="POST"
      action="{{ url_for('orders.new_order', order_id=order_id) }}"
      novalidate>
    {{ form.csrf_token }}

    <div class="col-md-6">
        {{ form.recipient.label(class="form-label") }}
        {{ form.recipient(class="form-control", type="text", maxlength="50", autocomplete="on",
        required="required") }}
        <div class="invalid-feedback">
            請輸入收件者姓名。姓名不可超過 16 個中文字。
        </div>
    </div>

    <div class="col-md-6">
        {{ form.cell_phone.label(class="form-label") }}
        {{ form.cell_phone(class="form-control", type="text", maxlength=20, aria_describedby="cell-phone-help",
        autocomplete="on") }}
        <div id="cell-phone-help" class="form-text">
            手機號碼格式須為 +國際碼.手機號碼（去掉最前方的 0）。<br/>
            範例：台灣國碼為 886，手機號碼為 0987654321，則輸入 +886.987654321
        </div>
        <div class="invalid-feedback">

        </div>
    </div>

    <div class="col-md-12">
        {{ form.address.label(class="form-label") }}
        {{ form.address(class="form-control", type="text", maxlength=100, autocomplete="on") }}
        <div class="invalid-feedback">
            請輸入收件地址。收件地址不可超過 33 個中文字。
        </div>
    </div>

    <div class="col-md-12">
        <button class="btn btn-secondary" type="submit">結帳</button>
    </div>
</form>

<script src="{{ url_for('static', filename='javascript/bootstrap_form_validator.js') }}"></script>
{% endblock %}